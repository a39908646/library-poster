import{aJ as N,aN as L,aO as U,aK as K,aq as W,j as P,d as $,h as d,ag as E,ab as M,P as _,a5 as q,u as H,a as J,z as j,r as y,b as G,C as Q,c as O,aD as X,f as B,aP as Y,t as Z}from"./index-BZvRV0hf.js";import{i as ee,c as te,u as ae}from"./FormItem-T9kAcPTf.js";import{a as ne}from"./AddOutline-BSdGMRE3.js";const se={tiny:"mini",small:"tiny",medium:"small",large:"medium",huge:"large"};function ie(t){const l=se[t];if(l===void 0)throw new Error(`${t} has no smaller size.`);return l}const le=N({name:"DynamicTags",common:W,peers:{Input:ee,Button:K,Tag:U,Space:L},self(){return{inputWidth:"64px"}}}),re=P("dynamic-tags",[P("input",{minWidth:"var(--n-input-width)"})]),ue=Object.assign(Object.assign(Object.assign({},j.props),Y),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),me=$({name:"DynamicTags",props:ue,slots:Object,setup(t){const{mergedClsPrefixRef:l,inlineThemeDisabled:c}=H(t),{localeRef:m}=ae("DynamicTags"),g=J(t),{mergedDisabledRef:s}=g,p=y(""),h=y(!1),f=y(!0),C=y(null),b=j("DynamicTags","-dynamic-tags",re,le,t,l),T=y(t.defaultValue),V=Z(t,"value"),r=G(V,T),F=O(()=>m.value.add),z=O(()=>ie(t.size)),D=O(()=>s.value||!!t.max&&r.value.length>=t.max);function I(e){const{onChange:a,"onUpdate:value":n,onUpdateValue:o}=t,{nTriggerFormInput:k,nTriggerFormChange:x}=g;a&&B(a,e),o&&B(o,e),n&&B(n,e),T.value=e,k(),x()}function R(e){const a=r.value.slice(0);a.splice(e,1),I(a)}function w(e){switch(e.key){case"Enter":u()}}function u(e){const a=e??p.value;if(a){const n=r.value.slice(0);n.push(t.onCreate(a)),I(n)}h.value=!1,f.value=!0,p.value=""}function A(){u()}function S(){h.value=!0,X(()=>{var e;(e=C.value)===null||e===void 0||e.focus(),f.value=!1})}const v=O(()=>{const{self:{inputWidth:e}}=b.value;return{"--n-input-width":e}}),i=c?Q("dynamic-tags",void 0,v,t):void 0;return{mergedClsPrefix:l,inputInstRef:C,localizedAdd:F,inputSize:z,inputValue:p,showInput:h,inputForceFocused:f,mergedValue:r,mergedDisabled:s,triggerDisabled:D,handleInputKeyDown:w,handleAddClick:S,handleInputBlur:A,handleCloseClick:R,handleInputConfirm:u,mergedTheme:b,cssVars:c?void 0:v,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){const{mergedTheme:t,cssVars:l,mergedClsPrefix:c,onRender:m,renderTag:g}=this;return m==null||m(),d(q,{class:[`${c}-dynamic-tags`,this.themeClass],size:"small",style:l,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagClass:p,tagStyle:h,type:f,round:C,size:b,color:T,closable:V,mergedDisabled:r,showInput:F,inputValue:z,inputClass:D,inputStyle:I,inputSize:R,inputForceFocused:w,triggerDisabled:u,handleInputKeyDown:A,handleInputBlur:S,handleAddClick:v,handleCloseClick:i,handleInputConfirm:e,$slots:a}=this;return this.mergedValue.map((n,o)=>g?g(n,o):d(E,{key:o,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,class:p,style:h,type:f,round:C,size:b,color:T,closable:V,disabled:r,onClose:()=>{i(o)}},{default:()=>typeof n=="string"?n:n.label})).concat(F?a.input?a.input({submit:e,deactivate:S}):d(te,Object.assign({placeholder:"",size:R,style:I,class:D,autosize:!0},this.inputProps,{ref:"inputInstRef",value:z,onUpdateValue:n=>{this.inputValue=n},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeydown:A,onBlur:S,internalForceFocus:w})):a.trigger?a.trigger({activate:v,disabled:u}):d(M,{dashed:!0,disabled:u,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:R,onClick:v},{icon:()=>d(_,{clsPrefix:c},{default:()=>d(ne,null)})}))}})}});export{me as N};
