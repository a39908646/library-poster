{
  "permissions": {
    "allow": [
      "mcp__ace-tool__enhance_prompt",
      "mcp__ace-tool__search_context",
      "Bash(app/generator/__init__.py <<'GENERATOR_INIT'\nimport logging\nfrom pathlib import Path\nfrom typing import Optional, Tuple\n\nfrom app.config import Config\nfrom app.generator.style_single_1 import create_style_single_1\nfrom app.generator.style_single_2 import create_style_single_2\nfrom app.generator.style_multi_1 import create_style_multi_1\n\nlogger = logging.getLogger\\(__name__\\)\n\n\ndef generate_cover\\(\n    library_dir: Path,\n    title: Tuple[str, str],\n    font_paths: Tuple[str, str],\n    config: Config\n\\) -> Optional[str]:\n    \"\"\"\n    生成封面\n\n    Args:\n        library_dir: 媒体库图片目录\n        title: \\(中文标题, 英文标题\\)\n        font_paths: \\(中文字体路径, 英文字体路径\\)\n        config: 配置对象\n\n    Returns:\n        Base64 编码的图片数据，失败返回 None\n    \"\"\"\n    style = config.cover.style\n\n    try:\n        if style == \"single_1\":\n            params = config.style_params.single\n            font_size = \\(config.fonts.main.zh_size, config.fonts.main.en_size\\)\n            return create_style_single_1\\(\n                str\\(library_dir\\),\n                title,\n                font_paths,\n                font_size=font_size,\n                blur_size=params.blur_size,\n                color_ratio=params.color_ratio\n            \\)\n        elif style == \"single_2\":\n            params = config.style_params.single\n            font_size = \\(config.fonts.main.zh_size, config.fonts.main.en_size\\)\n            return create_style_single_2\\(\n                str\\(library_dir\\),\n                title,\n                font_paths,\n                font_size=font_size,\n                blur_size=params.blur_size,\n                color_ratio=params.color_ratio\n            \\)\n        elif style == \"multi_1\":\n            params = config.style_params.multi_1\n            if config.fonts.multi_1.use_main_font:\n                font_size = \\(config.fonts.main.zh_size, config.fonts.main.en_size\\)\n            else:\n                font_size = \\(config.fonts.multi_1.zh_size, config.fonts.multi_1.en_size\\)\n            return create_style_multi_1\\(\n                library_dir,\n                title,\n                font_paths,\n                font_size=font_size,\n                is_blur=params.blur,\n                blur_size=params.blur_size,\n                color_ratio=params.color_ratio\n            \\)\n        else:\n            logger.error\\(f\"Unknown cover style: {style}\"\\)\n            return None\n    except Exception as e:\n        logger.error\\(f\"Failed to generate cover: {e}\", exc_info=True\\)\n        return None\nGENERATOR_INIT)",
      "Bash(.gitignore <<'GITIGNORE'\n# Python\n__pycache__/\n*.py[cod]\n*$py.class\n*.so\n.Python\nbuild/\ndevelop-eggs/\ndist/\ndownloads/\neggs/\n.eggs/\nlib/\nlib64/\nparts/\nsdist/\nvar/\nwheels/\n*.egg-info/\n.installed.cfg\n*.egg\nMANIFEST\n\n# Virtual Environment\nvenv/\nENV/\nenv/\n\n# IDE\n.vscode/\n.idea/\n*.swp\n*.swo\n*~\n\n# Data\ndata/\n*.log\n\n# Config\nconfig.yaml\n\n# OS\n.DS_Store\nThumbs.db\n\n# Frontend\nfrontend/node_modules/\nfrontend/dist/\nfrontend/.vite/\n\n# Docker\n.dockerignore\nGITIGNORE)"
    ]
  }
}
